function makeId(name,el,num) {
  return (name+el+num);
}

function myCardId (n) {
  return makeId(#{toJSON nm},"card",n);
}

function myColorId (n) {
  return makeId(#{toJSON nm},"color",n);
}

function myRankId (n) {
  return makeId(#{toJSON nm},"rank",n);
}


function sendDiscard (n) {
  for (var i=1; i <= #{toJSON numCards}; i++) {
    $("#"+myCardId(i))
      .children("img")
      .removeAttr("onclick")
      .removeClass("clickable");
  }
  $.post("@{DiscardR}",n);
  var thisCard = $("#"+myCardId(n));
  thisCard.fadeOut('slow',function () {thisCard.remove()});
  for (var i=n+1; i <= #{toJSON numCards}; i++) {
    $("#"+myCardId(i)).attr("id",myCardId(i-1));
    $("#"+myColorId(i)).attr("id",myColorId(i-1));
    $("#"+myRankId(i)).attr("id",myRankId(i-1));
  }
}

function makeDiscards () {
  for (var i=1; i <= #{toJSON numCards}; i++) {
    $("#"+#{toJSON nm}+"card"+i)
      .children("img")
      .attr("onclick","sendDiscard ("+i+")")
      .addClass("clickable");
  }
}
